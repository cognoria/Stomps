function k(c) {
    const a = document.createElement("div"); a.setAttribute("id", "stomps-bubble-button"); a.style.position = "fixed"; a.style.bottom = "16px"; "left" === c?.i.toLowerCase() ? a.style.left = "16px" : a.style.right = "16px"; a.style.width = 440 > window.innerWidth ? "50px" : "60px"; a.style.height = 440 > window.innerWidth ? "50px" : "60px"; a.style.display = "flex"; a.style.alignItems = "center"; a.style.justifyContent = "center"; a.style.borderRadius = "50%"; a.style.zIndex = "9999999999"; if (c.g.startsWith("#")) a.style.backgroundColor = c.g,
        a.style.color = "white"; else { const b = document.createElement("img"); b.src = c.g; b.style.width = 440 > window.innerWidth ? "40px" : "50px"; b.style.height = 440 > window.innerWidth ? "40px" : "50px"; b.style.display = "flex"; b.style.alignItems = "center"; b.style.justifyContent = "center"; a.appendChild(b) } a.style.fontSize = "16px"; a.style.fontWeight = "bold"; a.style.cursor = "pointer"; return a
}
function l(c, a, b, f) { const d = document.createElement("iframe"); d.setAttribute("id", "stomps-bubble-window"); d.src = `${b}/widget/${f}?host=${a}`; d.style.position = "fixed"; d.style.bottom = 440 > window.innerWidth ? "60px" : "80px"; d.style.right = 440 > window.innerWidth ? "5%" : "50px"; d.style.width = "90%"; d.style.maxWidth = "400px"; d.style.height = "85vh"; d.style.border = "none"; d.style.zIndex = "9999999999"; d.style.backgroundColor = "dark" === c.j.toLowerCase() ? "#333" : "#fff"; d.style.display = "none"; d.style.borderRadius = "30px"; return d }
function m(c) {
    const a = document.createElement("div"); a.setAttribute("id", "stomps-bubble-container"); a.style.minWidth = "fit-content"; a.style.display = "block"; a.style.position = "fixed"; a.style.zIndex = "2147483646"; a.style.bottom = 440 > window.innerWidth ? "60px" : "80px"; "left" === c?.i.toLowerCase() ? a.style.left = "16px" : a.style.right = "16px"; if (!n()) {
        const b = document.createElement("div"); b.style.position = "absolute"; b.style.top = "-12px"; b.style.opacity = "0"; b.style.right = "-12px"; b.style.width = "20px"; b.style.height = "20px";
        b.style.zIndex = "2147483650"; b.style.backgroundColor = "#333"; b.style.borderRadius = "50%"; b.style.display = "flex"; b.style.alignItems = "center"; b.style.justifyContent = "center"; b.style.cursor = "pointer"; b.innerHTML = "&times;"; b.style.color = "#fff"; a.addEventListener("mouseenter", () => { b.style.opacity = "1" }); a.addEventListener("mouseleave", () => { b.style.opacity = "0" }); b.addEventListener("click", () => { a.style.display = "none" }); a.appendChild(b)
    } return a
}
function p(c, a, b, f) {
    "none" === c.style.display ? (c.style.display = "block", b.style.display = "none", c.style.opacity = "0", c.style.transform = "translateY(20px)", c.style.transition = "opacity 0.3s ease, transform 0.3s ease", setTimeout(() => { c.style.opacity = "1"; c.style.transform = "translateY(0)" }, 50), b.style.display = "none", a.innerHTML = '\n    <svg id="closeIcon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth="2.3" stroke="#fff">\n      <path strokeLinecap="round" strokeLinejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />\n    </svg>\n  ',
        r({ A: !0 })) : (a.innerHTML = "", f.g.startsWith("#") ? (a.style.backgroundColor = f.g, a.style.color = "white") : (b = document.createElement("img"), b.src = f.g, b.style.width = 440 > window.innerWidth ? "40px" : "50px", b.style.height = 440 > window.innerWidth ? "40px" : "50px", a.appendChild(b)), c.style.opacity = "1", c.style.transform = "translateY(0)", c.style.transition = "opacity 0.3s ease, transform 0.3s ease", setTimeout(() => { c.style.opacity = "0"; c.style.transform = "translateY(20px)" }, 50), setTimeout(() => { c.style.display = "none" }, 300), r({ u: !0 }))
}
function t(c, a, b) { c.style.transform = b ? "scale(1.08)" : "scale(1)"; a.style.transform = "scale(1)"; a.style.minWidth = "fit-content" }
function u(c, a, b) {
    a?.o.forEach((f, d) => {
        const g = document.createElement("div"); g.style.display = "flex"; g.style.justifyContent = "left" === a?.i.toLowerCase() ? "flex-start" : "flex-end"; const e = document.createElement("div"); e.style.backgroundColor = "dark" === a?.j.toLowerCase() ? "#333" : "#fff"; e.style.color = "dark" === a?.j.toLowerCase() ? "#fff" : "#333"; e.style.padding = "8px 14px"; e.style.borderRadius = "16px"; e.style.fontFamily = "sans-serif"; e.style.fontSize = "0.75rem"; e.style.marginBottom = "8px"; e.style.opacity = "0"; e.style.transform =
            "scale(0.8)"; e.style.transition = "opacity 0.5s ease, transform 0.5s ease"; e.style.minWidth = "fit-content"; e.style.width = "fit-content"; e.textContent = f; g.appendChild(e); c.appendChild(g); 0 <= a?.m && setTimeout(() => { 640 > window.innerWidth || n() || (e.style.opacity = "1", e.style.transform = "scale(1)", e.addEventListener("click", () => b()), d === a.o.length - 1 && window.sessionStorage.setItem("message_bubbles_have_been_shown", "yes")) }, a?.m + 100 * d)
    })
}
async function v(c, a) { return await (await fetch(`${c}/api/v1/embed/${a}/widget-style`).catch(b => console.error("Error fetching chatbot data:", b))).json() } function n() { return "yes" === window.sessionStorage.getItem("message_bubbles_have_been_shown") } function r(c) { document.getElementById("stomps-bubble-window").contentWindow.postMessage(c, "*") }
async function w() {
    if (!window.h?.l) {
        var c = (new URL(document.currentScript.src)).origin, a = document.currentScript.getAttribute("domain") || window.h?.domain, b = document.currentScript.getAttribute("chatbotId") || window.h?.s || document.id, f = await v(a, b), d = k(f), g = l(f, c, a, b), e = m(f); d.addEventListener("click", () => p(g, d, e, f)); d.addEventListener("mouseenter", () => t(d, e, !0)); d.addEventListener("mouseleave", () => t(d, e, !1)); u(e, f, () => p(g, d, e, f)); document.body.appendChild(d); document.body.appendChild(e); document.body.appendChild(g);
        window.addEventListener("message", function (q) { q.origin === a && q.data.v && p(g, d, e, f) }); window.addEventListener("resize", () => { 440 > window.innerWidth ? (g.style.right = "5%", g.style.bottom = "60px", d.style.width = "50px", d.style.height = "50px") : (g.style.right = "50px", g.style.bottom = "80px", d.style.width = "60px", d.style.height = "60px") }); window.h && (window.h.l = !0)
    }
} "loading" !== document.readyState ? w() : document.addEventListener("DOMContentLoaded", w);
